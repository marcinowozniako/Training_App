{% extends 'base.html' %}
{% load embed_video_tags %}
{% load crispy_forms_tags %}
{% block title %}
    Workout List
{% endblock %}
{% block container %}
        <h1>Workout List</h1>

          {% if messages %}

     {% for message in messages %}
         <div class="text-center alert alert-{{ message.tags }}">
             {{ message|safe }}
         </div>
     {% endfor %}
 {% endif %}
    {% if object %}
    <form method="post">{% csrf_token %}
    <table class="table">
    <thead>
                <tr class="d-flex">
                    <th class="col-12 text-center" ><h2>{{ form.day|as_crispy_field }}</h2></th>
                </tr>
                </thead>
                <tbody class="text-color-lighter">
                <tr class="d-flex">
                        <td class="col-4 text-center">{{ form.exercise|as_crispy_field }}</td>
                        <td class="col-2 text-center">{{ form.sets|as_crispy_field }}</td>
                        <td class="col-2 text-center">{{ form.reps|as_crispy_field  }}</td>
                        <td class="col-2 text-center">{{ form.weight|as_crispy_field }}</td>
                        <td class="col-2 text-center">{% if form.total_weight %}{{ form.total_weight|as_crispy_field }}{% endif %}</td>
                    <div class="d-none">
                        <div class="d-none">
                        <input type="hidden" value="{{ form.reps_unit|as_crispy_field }}">
                        <div class="d-none">
                        <input type="hidden" value="{{ form.weight_unit|as_crispy_field }}">
                            <div class="d-none">
                        <input type="hidden" value="{{ form.day|as_crispy_field }}"></div></div></div></div>
                    </tr>
                </tbody>
    </table>
    <input type="submit" value="Update" class="btn btn-primary rounded-0 text-light m-1">
    </form>
    {% endif %}
    <table class="table">
            {% regroup workoutset_list by date as days %}
            {% for date in days %}
                <thead>
                <tr class="d-flex">
                    <th class="col-11 text-center" ><h2>{{ date.grouper }}
                        {% regroup date.list by day as dayd %}
                        {% for day in dayd %}{{ day.grouper }}{% endfor %}

                    </h2></th>
                </tr>
                </thead>
                <thead>
                <tr class="d-flex">
                    <th class="col-3">Exercise name</th>
                    <th class="col-2 text-center">Sets</th>
                    <th class="col-2 text-center">Reps</th>
                    <th class="col-2 text-center">Weight</th>
                    <th class="col-2 text-center">Total Weight</th>
                </tr>
                </thead>
                <tbody class="text-color-lighter">
                {% for exercise in date.list %}

                    <tr class="d-flex">
                        <td class="col-3">{{ exercise.exercise.name }}</td>
                        <td class="col-2 text-center">{{ exercise.sets }}</td>
                        <td class="col-2 text-center">{{ exercise.reps }} {{ exercise.reps_unit }}</td>
                        <td class="col-2 text-center">{% if exercise.weight %}{{ exercise.weight }}{% endif %}{{ exercise.weight_unit }}</td>
                        <td class="col-2 text-center">{% if exercise.total_weight %}{{ exercise.total_weight }}{{ exercise.weight_unit }}{% endif %}</td>
                        <td class="col-4 center">
                            <a href="{% url 'training:workout-edit' exercise.id %}"
                               class="btn btn-success rounded-0 text-light m-1">Edit</a>
                        </td>
                    </tr>
                {% endfor %}
            {% endfor %}
            </tbody>

        </table>

{% endblock %}